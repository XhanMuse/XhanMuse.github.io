<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>XhanMuse — Music</title>
  <style>
    :root{--maxw:980px}
    html,body{height:100%}
    body{
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
      margin:0;background:#f6f8fb;color:#0b1220;
      display:flex;align-items:flex-start;justify-content:center;padding:28px;
    }
    .wrap{width:100%;max-width:var(--maxw)}
    header{text-align:center}
    h1{margin:.25rem 0;font-size:2rem}
    p.lead{margin:0;color:#374151}
    .card{background:#fff;border-radius:12px;padding:18px;margin-top:18px;box-shadow:0 8px 30px rgba(2,6,23,.06)}
    .cover{width:100%;max-width:420px;border-radius:8px;display:block;margin:0 auto 12px;box-shadow:0 8px 20px rgba(2,6,23,.06)}
    .player{max-width:820px;margin:0 auto}
    audio{width:100%;margin-top:10px;display:block}
    .playlist{margin-top:12px}
    .track{
      display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-radius:8px;
      background:linear-gradient(180deg,#fff,#fbfdff);margin-bottom:8px;cursor:pointer;border:1px solid rgba(15,23,42,0.04)
    }
    .track.now{outline:2px solid rgba(34,197,94,.12);box-shadow:0 6px 18px rgba(16,24,40,.04)}
    .meta{font-size:.95rem;color:#111827}
    .small{font-size:.85rem;color:#6b7280}
    footer{margin-top:14px;text-align:center;font-size:.86rem;color:#6b7280}
    a{color:inherit;text-decoration:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>XhanMuse</h1>
      <p class="lead">Music by Xhan — click a track to play (files stored in <code>/audio/</code>)</p>
    </header>

    <div class="card player">
      <img src="assets/cover.jpg" alt="Cover" class="cover" />
      <audio id="audio" controls preload="none">
        <source id="audiosrc" src="audio/track1.mp3" type="audio/mpeg">
        Your browser doesn't support the audio element.
      </audio>

      <div id="playlist" class="playlist" aria-label="Playlist">
        <!-- playlist is populated by JS -->
      </div>

      <footer>
        <div class="small">Tip: To add tracks, upload files to the <code>/audio/</code> folder and update <code>tracks</code> in the script below.</div>
      </footer>
    </div>
  </div>

  <script>
    // Simple playlist — update filenames to match files you upload
    const tracks = [
      { title: "Song One", file: "audio/track1.mp3", length: "3:24" },
      { title: "Song Two", file: "audio/track2.mp3", length: "2:58" }
    ];

    const playlistEl = document.getElementById('playlist');
    const audio = document.getElementById('audio');
    const audiosrc = document.getElementById('audiosrc');

    function renderPlaylist(){
      playlistEl.innerHTML = "";
      tracks.forEach((t,i)=>{
        const div = document.createElement('div');
        div.className = "track";
        div.innerHTML = `<div class="meta">${t.title}</div><div class="small">${t.length}</div>`;
        div.addEventListener('click', ()=>{
          Array.from(playlistEl.children).forEach(c=>c.classList.remove('now'));
          div.classList.add('now');
          audiosrc.src = t.file;
          audio.load();
          audio.play().catch(()=>{/* play blocked until user interacts — handled by click */});
        });
        playlistEl.appendChild(div);
      });
    }

    // Auto-play next track when current ends
    audio.addEventListener('ended', ()=>{
      const currentIndex = tracks.findIndex(t => audio.currentSrc.endsWith(t.file));
      const next = (currentIndex + 1) % tracks.length;
      audiosrc.src = tracks[next].file;
      audio.load();
      audio.play().catch(()=>{});
      // highlight
      Array.from(playlistEl.children).forEach(c=>c.classList.remove('now'));
      playlistEl.children[next]?.classList.add('now');
    });

    renderPlaylist();
  </script>
</body>
</html>
